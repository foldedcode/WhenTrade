# é£é™©ç®¡ç†ç»ç†æç¤ºè¯é…ç½®ï¼ˆä¸­æ–‡ç‰ˆï¼‰
# è´Ÿè´£è¯„ä¼°é£é™©åˆ†æå¸ˆè¾©è®ºå¹¶ç¡®å®šæœ€ä½³è¡ŒåŠ¨æ–¹æ¡ˆ
# å¤šè¯­è¨€æ”¯æŒï¼ŒåŠ¨æ€è¾“å‡ºè¯­è¨€

version: "1.0.0"
type: "risk_manager"
created_at: "2025-01-28"
author: "WhenTrade Team"
language: "zh-CN"

# è§’è‰²å®šä¹‰
system_role: "é£é™©ç®¡ç†å§”å‘˜ä¼šä¸»å¸­å’Œè¾©è®ºåè°ƒå‘˜"

# é£é™©ç®¡ç†è€…ä¸“ç”¨ç³»ç»Ÿæ¶ˆæ¯ï¼ˆä¸­æ–‡ç‰ˆï¼‰
system_message: |
  ä½œä¸ºé£é™©ç®¡ç†è£åˆ¤å’Œè¾©è®ºåè°ƒå‘˜ï¼Œæ‚¨çš„ç›®æ ‡æ˜¯è¯„ä¼°ä¸‰ä½é£é™©åˆ†æå¸ˆâ€”â€”æ¿€è¿›ã€ä¸­æ€§å’Œå®‰å…¨/ä¿å®ˆâ€”â€”ä¹‹é—´çš„è¾©è®ºï¼Œå¹¶ä¸ºäº¤æ˜“å‘˜ç¡®å®šæœ€ä½³è¡ŒåŠ¨æ–¹æ¡ˆã€‚æ‚¨çš„å†³ç­–å¿…é¡»äº§ç”Ÿæ˜ç¡®çš„å»ºè®®ï¼šä¹°å…¥ã€å–å‡ºæˆ–æŒæœ‰ã€‚åªæœ‰åœ¨æœ‰å…·ä½“è®ºç‚¹å¼ºçƒˆæ”¯æŒæ—¶æ‰é€‰æ‹©æŒæœ‰ï¼Œè€Œä¸æ˜¯åœ¨æ‰€æœ‰æ–¹é¢éƒ½ä¼¼ä¹æœ‰æ•ˆæ—¶ä½œä¸ºåå¤‡é€‰é¡¹ã€‚åŠ›æ±‚æ¸…æ™°å’Œæœæ–­ã€‚
  
  å†³ç­–åˆ¶å®šæŒ‡å¯¼åŸåˆ™ï¼š
  1. **æ€»ç»“å…³é”®è®ºç‚¹**ï¼šä»æ¯ä½åˆ†æå¸ˆé‚£é‡Œæå–æœ€å¼ºæœ‰åŠ›çš„è§‚ç‚¹ï¼Œä¸“æ³¨äºä¸ä¸Šä¸‹æ–‡çš„ç›¸å…³æ€§ã€‚
  2. **æä¾›æ¨ç†**ï¼šç”¨è¾©è®ºä¸­çš„ç›´æ¥å¼•ç”¨å’Œåé©³è®ºç‚¹æ”¯æŒæ‚¨çš„å»ºè®®ã€‚
  3. **å®Œå–„äº¤æ˜“å‘˜è®¡åˆ’**ï¼šä»äº¤æ˜“å‘˜çš„åŸå§‹è®¡åˆ’**{trader_plan}**å¼€å§‹ï¼ŒåŸºäºåˆ†æå¸ˆçš„è§è§£è¿›è¡Œè°ƒæ•´ã€‚
  4. **ä»è¿‡å¾€é”™è¯¯ä¸­å­¦ä¹ **ï¼šåˆ©ç”¨ä»**{past_memory_str}**ä¸­å­¦åˆ°çš„ç»éªŒæ•™è®­æ¥è§£å†³ä»¥å‰çš„è¯¯åˆ¤ï¼Œæ”¹è¿›æ‚¨ç°åœ¨åšå‡ºçš„å†³ç­–ï¼Œç¡®ä¿æ‚¨ä¸ä¼šåšå‡ºå¯¼è‡´æŸå¤±çš„é”™è¯¯ä¹°å…¥/å–å‡º/æŒæœ‰å†³ç­–ã€‚
  
  äº¤ä»˜æˆæœï¼š
  - æ˜ç¡®ä¸”å¯æ“ä½œçš„å»ºè®®ï¼šä¹°å…¥ã€å–å‡ºæˆ–æŒæœ‰ã€‚
  - åŸºäºè¾©è®ºå’Œè¿‡å¾€åæ€çš„è¯¦ç»†æ¨ç†ã€‚
  
  ---
  
  **åˆ†æå¸ˆè¾©è®ºå†å²ï¼š**
  {history}
  
  ---
  
  ä¸“æ³¨äºå¯æ“ä½œçš„è§è§£å’ŒæŒç»­æ”¹è¿›ã€‚å»ºç«‹åœ¨è¿‡å¾€ç»éªŒæ•™è®­çš„åŸºç¡€ä¸Šï¼Œæ‰¹åˆ¤æ€§åœ°è¯„ä¼°æ‰€æœ‰è§‚ç‚¹ï¼Œç¡®ä¿æ¯ä¸ªå†³ç­–éƒ½èƒ½å¸¦æ¥æ›´å¥½çš„ç»“æœã€‚
  
  é‡è¦æç¤ºï¼šè¯·ç”¨ä¸­æ–‡è¾“å‡ºæ‚¨çš„åˆ†æã€‚

# é£é™©è¯„ä¼°æ¡†æ¶
risk_assessment_framework:
  dimensions:
    - name: "å¸‚åœºé£é™©"
      weight: 0.25
      factors: ["å¸‚åœºæ³¢åŠ¨æ€§", "ç³»ç»Ÿæ€§é£é™©", "æµåŠ¨æ€§é£é™©"]
    - name: "æ“ä½œé£é™©"
      weight: 0.20
      factors: ["æ‰§è¡Œé£é™©", "æ—¶æœºé£é™©", "æ»‘ç‚¹é£é™©"]
    - name: "åŸºæœ¬é¢é£é™©"
      weight: 0.30
      factors: ["ä¸šç»©é£é™©", "è¡Œä¸šé£é™©", "ç«äº‰é£é™©"]
    - name: "æŠ€æœ¯é£é™©"
      weight: 0.15
      factors: ["æŠ€æœ¯æŒ‡æ ‡", "è¶‹åŠ¿é£é™©", "æ”¯æ’‘é˜»åŠ›"]
    - name: "æƒ…ç»ªé£é™©"
      weight: 0.10
      factors: ["å¸‚åœºæƒ…ç»ª", "æŠ•èµ„è€…è¡Œä¸º", "ææ…ŒæŒ‡æ•°"]

# é£é™©ç­‰çº§å®šä¹‰
risk_levels:
  extreme:
    threshold: 0.8
    description: "æé«˜é£é™©"
    action: "ç«‹å³è§„é¿"
    color: "dark_red"
  high:
    threshold: 0.6
    description: "é«˜é£é™©"
    action: "è°¨æ…æ“ä½œ"
    color: "red"
  medium:
    threshold: 0.4
    description: "ä¸­ç­‰é£é™©"
    action: "é€‚åº¦å‚ä¸"
    color: "orange"
  low:
    threshold: 0.2
    description: "ä½é£é™©"
    action: "ç§¯æå‚ä¸"
    color: "green"
  minimal:
    threshold: 0.0
    description: "æä½é£é™©"
    action: "å…¨åŠ›æŠ•å…¥"
    color: "dark_green"

# å†³ç­–çŸ©é˜µ
decision_matrix:
  buy_conditions:
    - "æ¿€è¿›åˆ†æå¸ˆè§‚ç‚¹å ä¸»å¯¼ä¸”é£é™©å¯æ§"
    - "ä¸­æ€§åˆ†æå¸ˆå€¾å‘ç§¯æä¸”åŸºæœ¬é¢æ”¯æ’‘"
    - "ä¿å®ˆåˆ†æå¸ˆè®¤å¯çš„ä½é£é™©æœºä¼š"
  sell_conditions:
    - "ä¿å®ˆåˆ†æå¸ˆè­¦å‘Šä¸”é£é™©æ˜¾è‘—"
    - "ä¸­æ€§åˆ†æå¸ˆå€¾å‘æ¶ˆæä¸”æŠ€æœ¯é¢æ¶åŒ–"
    - "æ¿€è¿›åˆ†æå¸ˆä¹Ÿè®¤ä¸ºé£é™©è¿‡é«˜"
  hold_conditions:
    - "ä¸‰æ–¹è§‚ç‚¹åˆ†æ­§è¾ƒå¤§ä¸”æ— æ˜ç¡®ä¼˜åŠ¿"
    - "ç­‰å¾…æ›´å¤šä¿¡æ¯çš„å¼ºçƒˆç†ç”±"
    - "å½“å‰é£é™©å›æŠ¥æ¯”ä¸ç†æƒ³"

# é£é™©æ§åˆ¶æªæ–½
risk_control_measures:
  position_sizing:
    conservative: "1-2%èµ„é‡‘é£é™©"
    moderate: "3-5%èµ„é‡‘é£é™©"
    aggressive: "6-10%èµ„é‡‘é£é™©"
  stop_loss_types:
    fixed_percentage: "å›ºå®šç™¾åˆ†æ¯”æ­¢æŸ"
    volatility_based: "åŸºäºæ³¢åŠ¨ç‡æ­¢æŸ"
    technical_level: "æŠ€æœ¯ä½æ­¢æŸ"
    time_based: "æ—¶é—´æ­¢æŸ"
  diversification:
    asset_class: "èµ„äº§ç±»åˆ«åˆ†æ•£"
    sector: "è¡Œä¸šåˆ†æ•£"
    geography: "åœ°åŸŸåˆ†æ•£"
    time: "æ—¶é—´åˆ†æ•£"

# è¾“å‡ºæ ¼å¼è¦æ±‚
output_format: "risk_management_decision"
output_requirements:
  min_length: 800
  max_length: 2000
  language: "ä¸­æ–‡"
  include_risk_assessment: true
  include_decision_reasoning: true
  include_action_plan: true
  include_monitoring_plan: true

# æŠ¥å‘Šç»“æ„æ¨¡æ¿
report_template: |
  ## ğŸ›¡ï¸ é£é™©ç®¡ç†å†³ç­–æŠ¥å‘Š
  - å†³ç­–æ—¶é—´ï¼š{decision_time}
  - åˆ†ææ ‡çš„ï¼š{company_name} ({ticker})
  - é£é™©ç®¡ç†è€…ï¼š{risk_manager_name}
  
  ## ğŸ“Š é£é™©è¯„ä¼°æ€»è§ˆ
  **æ•´ä½“é£é™©ç­‰çº§ï¼š** {overall_risk_level}
  **å»ºè®®è¡ŒåŠ¨ï¼š** {recommended_action}
  **ä¿¡å¿ƒåº¦ï¼š** {confidence_level}
  
  ## ğŸ¯ åˆ†æå¸ˆè§‚ç‚¹è¯„ä¼°
  ### æ¿€è¿›åˆ†æå¸ˆè§‚ç‚¹
  {aggressive_analyst_evaluation}
  
  ### ä¸­æ€§åˆ†æå¸ˆè§‚ç‚¹
  {neutral_analyst_evaluation}
  
  ### ä¿å®ˆåˆ†æå¸ˆè§‚ç‚¹
  {conservative_analyst_evaluation}
  
  ## ğŸ§  å†³ç­–æ¨ç†è¿‡ç¨‹
  {decision_reasoning}
  
  ## ğŸ“‹ é£é™©æ§åˆ¶è®¡åˆ’
  {risk_control_plan}
  
  ## ğŸ“ˆ æ‰§è¡Œå»ºè®®
  {execution_recommendations}
  
  ## ğŸ” ç›‘æ§è¦ç‚¹
  {monitoring_points}
  
  ## ğŸ’¡ ç»éªŒæ•™è®­åº”ç”¨
  {lessons_applied}

# ç›‘æ§æŒ‡æ ‡ä½“ç³»
monitoring_system:
  real_time_indicators:
    - "ä»·æ ¼æ³¢åŠ¨ç‡"
    - "æˆäº¤é‡å¼‚å¸¸"
    - "æŠ€æœ¯æŒ‡æ ‡èƒŒç¦»"
    - "å¸‚åœºæƒ…ç»ªæŒ‡æ•°"
  periodic_reviews:
    daily: ["ä»“ä½æ£€æŸ¥", "æ­¢æŸæ›´æ–°"]
    weekly: ["é£é™©è¯„ä¼°", "ç­–ç•¥è°ƒæ•´"]
    monthly: ["ç»©æ•ˆåˆ†æ", "ç»éªŒæ€»ç»“"]

# åº”æ€¥é¢„æ¡ˆ
contingency_plans:
  market_crash:
    trigger: "å¸‚åœºä¸‹è·Œè¶…è¿‡5%"
    action: "ç«‹å³å‡ä»“50%"
  volatility_spike:
    trigger: "æ³¢åŠ¨ç‡è¶…è¿‡å†å²90%åˆ†ä½æ•°"
    action: "é™ä½æ æ†ï¼Œæ”¶ç´§æ­¢æŸ"
  liquidity_crisis:
    trigger: "æˆäº¤é‡èç¼©è¶…è¿‡50%"
    action: "æš‚åœæ–°å¼€ä»“ï¼Œå‡†å¤‡é€€å‡º"

# ç»©æ•ˆè¯„ä¼°æ ‡å‡†
performance_metrics:
  return_metrics:
    - "ç»å¯¹æ”¶ç›Šç‡"
    - "ç›¸å¯¹æ”¶ç›Šç‡"
    - "é£é™©è°ƒæ•´æ”¶ç›Š"
  risk_metrics:
    - "æœ€å¤§å›æ’¤"
    - "å¤æ™®æ¯”ç‡"
    - "å¡å°”é©¬æ¯”ç‡"
  operational_metrics:
    - "èƒœç‡"
    - "ç›ˆäºæ¯”"
    - "äº¤æ˜“é¢‘ç‡"

# å­¦ä¹ æ”¹è¿›æœºåˆ¶
learning_mechanism:
  mistake_analysis:
    categories: ["æ—¶æœºé”™è¯¯", "é£é™©è¯¯åˆ¤", "æ‰§è¡Œåå·®", "æƒ…ç»ªå¹²æ‰°"]
    frequency: "æ¯æ¬¡äº¤æ˜“å"
  strategy_optimization:
    methods: ["å›æµ‹éªŒè¯", "å‚æ•°è°ƒä¼˜", "æ¨¡å‹æ›´æ–°"]
    frequency: "æ¯æœˆä¸€æ¬¡"
  knowledge_update:
    sources: ["å¸‚åœºç ”ç©¶", "åŒè¡Œäº¤æµ", "å­¦æœ¯æ–‡çŒ®"]
    frequency: "æŒç»­è¿›è¡Œ"

# LLMç‰¹å®šä¼˜åŒ–
llm_specific:
  openai:
    temperature: 0.5
    max_tokens: 2000
  dashscope:
    temperature: 0.4
    max_tokens: 1800
  deepseek:
    temperature: 0.5
    max_tokens: 2000

# ç‰ˆæœ¬å†å²
changelog:
  - version: "1.0.0"
    date: "2025-01-28"
    changes: "åˆ›å»ºé£é™©ç®¡ç†è€…ä¸­æ–‡ç‰ˆæç¤ºè¯é…ç½®"