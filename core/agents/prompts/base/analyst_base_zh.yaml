# 基础分析师提示词模板
# 所有分析师继承此模板，可覆盖任何字段
# 遵循Linus哲学：通过统一的数据结构消除特殊情况

version: "1.0.0"
type: "base_analyst"
created_at: "2025-01-28"
author: "WhenTrade Team"

# 系统角色定义
system_role: "专业的金融分析师"

# 基础系统消息（所有分析师共享）
base_system_message: |
  您是一位专业的金融分析师，与其他分析师协作完成投资分析任务。
  
  通用要求：
  - 使用提供的工具获取和分析数据
  - 基于真实数据进行客观分析
  - 提供量化的分析结果
  - 识别关键风险和机会
  - 给出明确的投资建议
  
  协作原则：
  - 如果您无法完全回答，其他分析师会继续协助
  - 专注于您的专业领域
  - 执行您能做的以取得进展
  - 保持分析的连贯性和一致性

# 工具使用配置
tool_usage:
  enabled: true
  require_tool_call: false  # 是否强制调用工具
  tool_call_format: |
    使用工具的格式：
    调用: {tool_name}({parameters})
    
    重要：必须基于工具返回的数据进行分析

# 输出格式要求
output_format: "structured_report"
output_requirements:
  min_length: 500  # 最小字数
  max_length: 2000  # 最大字数
  language: "中文"
  include_summary: true
  include_recommendations: true
  include_risks: true

# 分析维度（可被具体分析师覆盖）
analysis_dimensions:
  - "数据分析"
  - "趋势判断"
  - "风险评估"
  - "投资建议"

# 报告结构模板
report_template: |
  ## 📊 分析概览
  {overview}
  
  ## 📈 详细分析
  {detailed_analysis}
  
  ## ⚠️ 风险因素
  {risk_factors}
  
  ## 💡 投资建议
  {recommendations}
  
  ## 📋 关键指标汇总
  {metrics_summary}

# 占位符定义（用于参数替换）
placeholders:
  - name: "ticker"
    description: "股票代码"
    required: true
  - name: "current_date"
    description: "当前日期"
    required: true
  - name: "company_name"
    description: "公司名称"
    required: false
  - name: "tool_names"
    description: "可用工具列表"
    required: false

# 验证规则
validation:
  check_placeholders: true
  check_output_length: true
  check_language: true
  
# 性能追踪配置
performance_tracking:
  enabled: true
  track_token_usage: true
  track_response_time: true
  track_tool_calls: true

# 错误处理策略
error_handling:
  on_tool_failure: "provide_alternative_analysis"
  on_timeout: "return_partial_results"
  max_retries: 2
  
# LLM特定配置（可根据不同LLM提供商调整）
llm_specific:
  openai:
    temperature: 0.7
    max_tokens: 2000
  dashscope:
    temperature: 0.6
    max_tokens: 1500
    enable_search: false
  deepseek:
    temperature: 0.7
    max_tokens: 2000

# 提示词增强选项
enhancements:
  use_few_shot: false  # 是否使用少样本学习
  use_chain_of_thought: true  # 是否使用思维链
  use_self_reflection: false  # 是否使用自我反思
  
# 版本历史
changelog:
  - version: "1.0.0"
    date: "2025-01-28"
    changes: "初始版本，建立基础分析师模板"